<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Compar Store Account Verification Page</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="CSS/styles.css">
		
		<!-- Visit https://api.jquery.com & for more info. -->
		<!-- jQuery Library located in public html -->
		<script src="jquery-3.5.1.min.js"></script>	
	</head>
	
	<body>
		
		<div class="body-container">
			
			<div class="navbar">
				<a href="index.htm">Home</a>
				<a href="register.htm">Signup</a>
				<a href="#">About</a>
			</div>
			
			<div class="flex-container">
				
				<div class="flex-image">
					<img src="/images/img-website/comparlogo1.png">
				</div>
				
			</div> 
			
			<img src="/images/img-website/harbar.png">
			
			<div class="verification">
				<h1>Verify Account</h1>
				<form id="verificationform" autocomplete="off">
					<label for="username">
						<i class="fas fa-user"></i>
					</label>
					<input type="email" name="email" placeholder="Email" id="email" required>
					<label for="password">
						<i class="fas fa-lock"></i>
					</label>
					<input type="text" name="verification-code" placeholder="Verification Code" id="verification-code" required>
					<a id= "verification-button" class= "verification-button" href= "#">Submit Verification</a>
				</form>
			</div>
			
		</div>
		
		<!-- login function -->
		<script>
			<!-- Prevent function execution until html is loaded. -->
			$(document).ready(function() {
			//Receive click event.
			$("#verification-button").on("click",function(e) {
			//Override button click event to prevent default behavior.
			e.preventDefault();
			
			//User input values stored in a variable.
			var emailValue = $("#email").val()
			var verificationCodeValue = $("#verification-code").val()
			
			console.log(verificationCodeValue)//Remove after testing.
			
			//Prepare aJax request.
			$.ajax({
			//Add request parameters.
			//Php file to run.
			//Request type.
			//Data map to send.
			url:"verification.php",
			method:"POST",
			data:{
			//Add key value to data map.
			email:emailValue,
			verification_code:verificationCodeValue
			},
			
			
			//Data returnedfrom php script.
			}).done(function(response){
			
			//Parse response.
			var jsonData = JSON.parse(response);
			
			//Check error message.
			if(jsonData['p_isError']==true){
				console.log(jsonData['p_message'])//Remove after testing.
			
				
				}else{
				//Redirect to account profile.
			    window.location.href = "https://www.compar.store/login.htm";
				console.log(jsonData['p_message'])//Remove after testing.
			}
			
			
		});
		
	});
});
</script>



<footer class="footer">
	&copy;Pensar Code LLC -  All Rights Reserved [Webdesign by Alex Jensen (admiralex@gmail.com)]
</footer>

</body>
</html>